/*=========================================================================\
* Copyright(C)2016 Chudai.
*
* File name    : stack.c
* Version      : v1.0.0
* Author       : 初代
* Date         : 2016/06/17
* Description  :
* Function list: 1.
*                2.
*                3.
* History      :
\*=========================================================================*/

/*-----------------------------------------------------------*
 * 头文件                                                    *
 *-----------------------------------------------------------*/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "stack.h"

/*-----------------------------------------------------------*
 * 外部变量说明                                              *
 *-----------------------------------------------------------*/

/*-----------------------------------------------------------*
 * 外部函数原型说明                                          *
 *-----------------------------------------------------------*/

/*-----------------------------------------------------------*
 * 内部函数原型说明                                          *
 *-----------------------------------------------------------*/

/*-----------------------------------------------------------*
 * 全局变量                                                  *
 *-----------------------------------------------------------*/

/*-----------------------------------------------------------*
 * 模块级变量                                                *
 *-----------------------------------------------------------*/

/*-----------------------------------------------------------*
 * 常量定义                                                  *
 *-----------------------------------------------------------*/

/*-----------------------------------------------------------*
 * 宏定义                                                    *
 *-----------------------------------------------------------*/

/*-----------------------------------------------------------*
 * 函数实现                                                  *
 *-----------------------------------------------------------*/


/*======================================================================\
* Author     (作者): i.sshe
* Date       (日期): 2016/06/17
* Others     (其他): 新建一个空栈
\*=======================================================================*/
int create_stack(stack_s **stack, int size)
{
     int    ret = 0;

     *stack = (stack_s *)malloc(sizeof(stack_s));
     if (stack == NULL)
     {
         ret = -1;
     }

     (*stack)->array = (int *)malloc(sizeof(int) * size);
     if ((*stack)->array == NULL)
     {
          ret = -1;
     }

     //初始化
     memset((*stack)->array, 0, sizeof(int) * size);
     (*stack)->top = -1;

     ret = 0;

     return ret;
}


/*======================================================================\
* Author     (作者): i.sshe
* Date       (日期): 2016/06/17
* Others     (其他): 压栈
\*=======================================================================*/
int push_stack(stack_s *stack, int value, int size)
{
    int     ret = 0;

    if (stack->top >= size-1)         //当top等于size-1的时候就不能在进栈了
    {
        ret = -1;
    }
    else
    {
        stack->top++;
        stack->array[stack->top] = value;
        ret = 0;
    }
     return ret;
}


/*======================================================================\
* Author     (作者): i.sshe
* Date       (日期): 2016/06/17
* Others     (其他): 出栈
\*=======================================================================*/
int pop_stack(stack_s *stack)
{
     int    ret = 0;

     if (stack->top < 0)
     {
          ret = -1;
     }
     else
     {
         stack->top--;
         ret = 0;
     }

     return ret;
}


/*======================================================================\
* Author     (作者): i.sshe
* Date       (日期): 2016/06/17
* Others     (其他): 清空栈
\*=======================================================================*/
int clear_stack(stack_s *stack)
{
     stack->top = -1;

     return 0;
}


/*======================================================================\
* Author     (作者): i.sshe
* Date       (日期): 2016/06/17
* Others     (其他): 判断栈是否为空
\*=======================================================================*/
int is_empty(stack_s *stack)
{
    int ret = 0;

     if (stack->top == -1)
     {
         ret = 0;
     }
     else
     {
          ret = -1;
     }

     return ret;
}


/*======================================================================\
* Author     (作者): i.sshe
* Date       (日期): 2016/06/17
* Others     (其他): 输出栈的内容。不清空栈。
\*=======================================================================*/
void output_stack(stack_s *stack)
{
     int    count = stack->top;
     while(count >= 0)
     {
         printf("%d ", stack->array[count]);
         count--;
     }
     printf("\n");
}
